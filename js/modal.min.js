var linkFormWriteUs=document.querySelector(".contacts .link"),linkMap=document.querySelector(".contacts .map-link"),overlay=document.querySelector(".popup-overlay"),modalWriteUs=document.querySelector(".popup-write-us"),btnClose=document.querySelector(".popup-write-us .btn-close"),btnCloseMap=document.querySelector(".popup-map .btn-close"),modalMap=document.querySelector(".popup-map"),mapPic=document.querySelector(".popup-map .map-pic"),form=document.querySelector(".popup-write-us__form"),formLogin=document.querySelector(".popup-write-us__form .title-field__name"),formEmail=document.querySelector(".popup-write-us__form .title-field__email"),isStorageSupport=!0,storage="",iframe=document.querySelector(".popup-map iframe"),iframeStatus="";try{storage=localStorage.getItem("userLogin")}catch(e){isStorageSupport=!1}try{var iframeDocument=iframe.contentWindow.document||iframe.contentDocument;"complete"==iframeDocument.readyState&&(iframeStatus=!0)}catch(e){iframeStatus=!1}function hideModalWriteUs(e){e.preventDefault(),formLogin.classList.remove("popup-write-us--error"),formEmail.classList.remove("popup-write-us--error"),overlay.classList.remove("popup-overlay--active"),modalWriteUs.classList.remove("popup-write-us--active")}function hideModalMap(e){e.preventDefault(),overlay.classList.remove("popup-overlay--active"),modalMap.classList.remove("popup-map--active")}function showModalWriteUs(e){e.preventDefault(),modalWriteUs.classList.add("popup-write-us--active"),overlay.classList.add("popup-overlay--active"),storage?(formLogin.value=storage,formEmail.focus()):formLogin.focus(),window.addEventListener("keydown",function(e){27===e.keyCode&&hideModalWriteUs(e)})}function showModalMap(e){e.preventDefault(),modalMap.classList.add("popup-map--active"),overlay.classList.add("popup-overlay--active"),iframeStatus?mapPic.style.display="none":iframe.style.display="none",window.addEventListener("keydown",function(e){27===e.keyCode&&hideModalMap(e)})}function formValue(e){formLogin.value?formEmail.value?isStorageSupport&&(localStorage.setItem("userLogin",formLogin.value),localStorage.setItem("userPassword",formEmail.value)):(e.preventDefault(),formEmail.classList.remove("popup-write-us--error"),formEmail.offsetWidth=formEmail.offsetWidth,formEmail.classList.add("popup-write-us--error")):(e.preventDefault(),formLogin.classList.remove("popup-write-us--error"),formLogin.offsetWidth=formLogin.offsetWidth,formLogin.classList.add("popup-write-us--error"))}linkFormWriteUs.addEventListener("click",showModalWriteUs),linkMap.addEventListener("click",showModalMap),overlay.addEventListener("click",hideModalWriteUs),overlay.addEventListener("click",hideModalMap),btnClose.addEventListener("click",hideModalWriteUs),btnCloseMap.addEventListener("click",hideModalMap),form.addEventListener("submit",formValue);
